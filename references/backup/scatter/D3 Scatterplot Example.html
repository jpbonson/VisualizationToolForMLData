<!DOCTYPE html>
<!-- saved from url=(0035)http://bl.ocks.org/weiglemc/6185069 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8">
<title>D3 Scatterplot Example</title>
<link rel="icon" href="http://bl.ocks.org/favicon.png">
<style>

@import url("/style.css?20120730");

header,
footer {
  color: #555;
}

a.gist {
  color: #000;
}

</style>

<style type="text/css"></style></head><body><header>
  <a href="http://bl.ocks.org/weiglemc">weiglemc</a>’s block
  <a class="gist" title="View gist #6185069 on GitHub" href="https://gist.github.com/weiglemc/6185069">#6185069</a>
  <span class="date">August 8, 2013</span>
</header>

<h1>D3 Scatterplot Example</h1>


<iframe src="./D3 Scatterplot Example_files/saved_resource.html" marginwidth="0" marginheight="0" scrolling="no"></iframe>
<p></p><aside><a style="position:relative;top:6px;" href="http://bl.ocks.org/weiglemc/raw/6185069/" target="_blank">Open in a new window.</a></aside>


<div class="gist-readme"><p>d3 scatterplot example using the Breakfast Cereal Dataset from http://idvbook.com and based on the scatterplot example at http://bl.ocks.org/mbostock/3887118</p></div>

<div class="gist-sources"><div class="gist-source"><h2>index.html<a name="index.html" href="http://bl.ocks.org/weiglemc/6185069#index.html">#</a></h2><pre><code class="html xml"><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span>

<span class="comment">&lt;!-- Example based on http://bl.ocks.org/mbostock/3887118 --&gt;</span>
<span class="comment">&lt;!-- Tooltip example from http://www.d3noob.org/2013/01/adding-tooltips-to-d3js-graph.html --&gt;</span>

<span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css">
<span class="tag">body</span> <span class="rules">{
  <span class="rule"><span class="attribute">font</span>:<span class="value"> <span class="number">11</span>px sans-serif</span>;</span>
<span class="rule">}</span></span>

<span class="class">.axis</span> <span class="tag">path</span>,
<span class="class">.axis</span> <span class="tag">line</span> <span class="rules">{
  <span class="rule"><span class="attribute">fill</span>:<span class="value"> none</span>;</span>
  <span class="rule"><span class="attribute">stroke</span>:<span class="value"> <span class="number">#000</span></span>;</span>
  <span class="rule"><span class="attribute">shape-rendering</span>:<span class="value"> crispEdges</span>;</span>
<span class="rule">}</span></span>

<span class="class">.dot</span> <span class="rules">{
  <span class="rule"><span class="attribute">stroke</span>:<span class="value"> <span class="number">#000</span></span>;</span>
<span class="rule">}</span></span>

<span class="class">.tooltip</span> <span class="rules">{
  <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span>;</span>
  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200</span>px</span>;</span>
  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">28</span>px</span>;</span>
  <span class="rule"><span class="attribute">pointer-events</span>:<span class="value"> none</span>;</span>
<span class="rule">}</span></span>
</span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://d3js.org/d3.v3.min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>

<span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
<span class="keyword">var</span> margin = {top: <span class="number">20</span>, right: <span class="number">20</span>, bottom: <span class="number">30</span>, left: <span class="number">40</span>},
    width = <span class="number">960</span> - margin.left - margin.right,
    height = <span class="number">500</span> - margin.top - margin.bottom;

<span class="comment">/* 
 * value accessor - returns the value to encode for a given data object.
 * scale - maps value to a visual display encoding, such as a pixel position.
 * map function - maps from data value to display value
 * axis - sets up axis
 */</span> 

<span class="comment">// setup x </span>
<span class="keyword">var</span> xValue = <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> d.Calories;}, <span class="comment">// data -&gt; value</span>
    xScale = d3.scale.linear().range([<span class="number">0</span>, width]), <span class="comment">// value -&gt; display</span>
    xMap = <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> xScale(xValue(d));}, <span class="comment">// data -&gt; display</span>
    xAxis = d3.svg.axis().scale(xScale).orient(<span class="string">"bottom"</span>);

<span class="comment">// setup y</span>
<span class="keyword">var</span> yValue = <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> d[<span class="string">"Protein (g)"</span>];}, <span class="comment">// data -&gt; value</span>
    yScale = d3.scale.linear().range([height, <span class="number">0</span>]), <span class="comment">// value -&gt; display</span>
    yMap = <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> yScale(yValue(d));}, <span class="comment">// data -&gt; display</span>
    yAxis = d3.svg.axis().scale(yScale).orient(<span class="string">"left"</span>);

<span class="comment">// setup fill color</span>
<span class="keyword">var</span> cValue = <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> d.Manufacturer;},
    color = d3.scale.category10();

<span class="comment">// add the graph canvas to the body of the webpage</span>
<span class="keyword">var</span> svg = d3.select(<span class="string">"body"</span>).append(<span class="string">"svg"</span>)
    .attr(<span class="string">"width"</span>, width + margin.left + margin.right)
    .attr(<span class="string">"height"</span>, height + margin.top + margin.bottom)
  .append(<span class="string">"g"</span>)
    .attr(<span class="string">"transform"</span>, <span class="string">"translate("</span> + margin.left + <span class="string">","</span> + margin.top + <span class="string">")"</span>);

<span class="comment">// add the tooltip area to the webpage</span>
<span class="keyword">var</span> tooltip = d3.select(<span class="string">"body"</span>).append(<span class="string">"div"</span>)
    .attr(<span class="string">"class"</span>, <span class="string">"tooltip"</span>)
    .style(<span class="string">"opacity"</span>, <span class="number">0</span>);

<span class="comment">// load data</span>
d3.csv(<span class="string">"cereal.csv"</span>, <span class="function"><span class="keyword">function</span><span class="params">(error, data)</span> {</span>

  <span class="comment">// change string (from CSV) into number format</span>
  data.forEach(<span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span>
    d.Calories = +d.Calories;
    d[<span class="string">"Protein (g)"</span>] = +d[<span class="string">"Protein (g)"</span>];
<span class="comment">//    console.log(d);</span>
  });

  <span class="comment">// don't want dots overlapping axis, so add in buffer to data domain</span>
  xScale.domain([d3.min(data, xValue)-<span class="number">1</span>, d3.max(data, xValue)+<span class="number">1</span>]);
  yScale.domain([d3.min(data, yValue)-<span class="number">1</span>, d3.max(data, yValue)+<span class="number">1</span>]);

  <span class="comment">// x-axis</span>
  svg.append(<span class="string">"g"</span>)
      .attr(<span class="string">"class"</span>, <span class="string">"x axis"</span>)
      .attr(<span class="string">"transform"</span>, <span class="string">"translate(0,"</span> + height + <span class="string">")"</span>)
      .call(xAxis)
    .append(<span class="string">"text"</span>)
      .attr(<span class="string">"class"</span>, <span class="string">"label"</span>)
      .attr(<span class="string">"x"</span>, width)
      .attr(<span class="string">"y"</span>, -<span class="number">6</span>)
      .style(<span class="string">"text-anchor"</span>, <span class="string">"end"</span>)
      .text(<span class="string">"Calories"</span>);

  <span class="comment">// y-axis</span>
  svg.append(<span class="string">"g"</span>)
      .attr(<span class="string">"class"</span>, <span class="string">"y axis"</span>)
      .call(yAxis)
    .append(<span class="string">"text"</span>)
      .attr(<span class="string">"class"</span>, <span class="string">"label"</span>)
      .attr(<span class="string">"transform"</span>, <span class="string">"rotate(-90)"</span>)
      .attr(<span class="string">"y"</span>, <span class="number">6</span>)
      .attr(<span class="string">"dy"</span>, <span class="string">".71em"</span>)
      .style(<span class="string">"text-anchor"</span>, <span class="string">"end"</span>)
      .text(<span class="string">"Protein (g)"</span>);

  <span class="comment">// draw dots</span>
  svg.selectAll(<span class="string">".dot"</span>)
      .data(data)
    .enter().append(<span class="string">"circle"</span>)
      .attr(<span class="string">"class"</span>, <span class="string">"dot"</span>)
      .attr(<span class="string">"r"</span>, <span class="number">3.5</span>)
      .attr(<span class="string">"cx"</span>, xMap)
      .attr(<span class="string">"cy"</span>, yMap)
      .style(<span class="string">"fill"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> color(cValue(d));}) 
      .on(<span class="string">"mouseover"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span>
          tooltip.transition()
               .duration(<span class="number">200</span>)
               .style(<span class="string">"opacity"</span>, .<span class="number">9</span>);
          tooltip.html(d[<span class="string">"Cereal Name"</span>] + <span class="string">"&lt;br/&gt; ("</span> + xValue(d) 
	        + <span class="string">", "</span> + yValue(d) + <span class="string">")"</span>)
               .style(<span class="string">"left"</span>, (d3.event.pageX + <span class="number">5</span>) + <span class="string">"px"</span>)
               .style(<span class="string">"top"</span>, (d3.event.pageY - <span class="number">28</span>) + <span class="string">"px"</span>);
      })
      .on(<span class="string">"mouseout"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span>
          tooltip.transition()
               .duration(<span class="number">500</span>)
               .style(<span class="string">"opacity"</span>, <span class="number">0</span>);
      });

  <span class="comment">// draw legend</span>
  <span class="keyword">var</span> legend = svg.selectAll(<span class="string">".legend"</span>)
      .data(color.domain())
    .enter().append(<span class="string">"g"</span>)
      .attr(<span class="string">"class"</span>, <span class="string">"legend"</span>)
      .attr(<span class="string">"transform"</span>, <span class="function"><span class="keyword">function</span><span class="params">(d, i)</span> {</span> <span class="keyword">return</span> <span class="string">"translate(0,"</span> + i * <span class="number">20</span> + <span class="string">")"</span>; });

  <span class="comment">// draw legend colored rectangles</span>
  legend.append(<span class="string">"rect"</span>)
      .attr(<span class="string">"x"</span>, width - <span class="number">18</span>)
      .attr(<span class="string">"width"</span>, <span class="number">18</span>)
      .attr(<span class="string">"height"</span>, <span class="number">18</span>)
      .style(<span class="string">"fill"</span>, color);

  <span class="comment">// draw legend text</span>
  legend.append(<span class="string">"text"</span>)
      .attr(<span class="string">"x"</span>, width - <span class="number">24</span>)
      .attr(<span class="string">"y"</span>, <span class="number">9</span>)
      .attr(<span class="string">"dy"</span>, <span class="string">".35em"</span>)
      .style(<span class="string">"text-anchor"</span>, <span class="string">"end"</span>)
      .text(<span class="function"><span class="keyword">function</span><span class="params">(d)</span> {</span> <span class="keyword">return</span> d;})
});

</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span></code></pre></div><div class="gist-source"><h2>cereal.csv<a name="cereal.csv" href="http://bl.ocks.org/weiglemc/6185069#cereal.csv">#</a></h2><pre><code class="undefined">Cereal Name,Manufacturer,Type,Calories,Protein (g),Fat,Sodium,Dietary Fiber,Carbs,Sugars,Display Shelf,Potassium,Vitamins and Minerals,Serving Size Weight,Cups per Serving
100%_Bran,Nabisco,C,70,4,1,130,10,5,6,3,280,25,1,0.33
100%_Natural_Bran,Quaker Oats,C,120,3,5,15,2,8,8,3,135,0,1,-1
All-Bran,Kelloggs,C,70,4,1,260,9,7,5,3,320,25,1,0.33
All-Bran_with_Extra_Fiber,Kelloggs,C,50,4,0,140,14,8,0,3,330,25,1,0.5
Almond_Delight,Ralston Purina,C,110,2,2,200,1,14,8,3,-1,25,1,0.75
Apple_Cinnamon_Cheerios,General Mills,C,110,2,2,180,1.5,10.5,10,1,70,25,1,0.75
Apple_Jacks,Kelloggs,C,110,2,0,125,1,11,14,2,30,25,1,1
Basic_4,General Mills,C,130,3,2,210,2,18,8,3,100,25,1.33,0.75
Bran_Chex,Ralston Purina,C,90,2,1,200,4,15,6,1,125,25,1,0.67
Bran_Flakes,Post,C,90,3,0,210,5,13,5,3,190,25,1,0.67
Cap'n'Crunch,Quaker Oats,C,120,1,2,220,0,12,12,2,35,25,1,0.75
Cheerios,General Mills,C,110,6,2,290,2,17,1,1,105,25,1,1.25
Cinnamon_Toast_Crunch,General Mills,C,120,1,3,210,0,13,9,2,45,25,1,0.75
Clusters,General Mills,C,110,3,2,140,2,13,7,3,105,25,1,0.5
Cocoa_Puffs,General Mills,C,110,1,1,180,0,12,13,2,55,25,1,1
Corn_Chex,Ralston Purina,C,110,2,0,280,0,22,3,1,25,25,1,1
Corn_Flakes,Kelloggs,C,100,2,0,290,1,21,2,1,35,25,1,1
Corn_Pops,Kelloggs,C,110,1,0,90,1,13,12,2,20,25,1,1
Count_Chocula,General Mills,C,110,1,1,180,0,12,13,2,65,25,1,1
Cracklin'_Oat_Bran,Kelloggs,C,110,3,3,140,4,10,7,3,160,25,1,0.5
Cream_of_Wheat_(Quick),Nabisco,H,100,3,0,80,1,21,0,2,-1,0,1,1
Crispix,Kelloggs,C,110,2,0,220,1,21,3,3,30,25,1,1
Crispy_Wheat_&amp;_Raisins,General Mills,C,100,2,1,140,2,11,10,3,120,25,1,0.75
Double_Chex,Ralston Purina,C,100,2,0,190,1,18,5,3,80,25,1,0.75
Froot_Loops,Kelloggs,C,110,2,1,125,1,11,13,2,30,25,1,1
Frosted_Flakes,Kelloggs,C,110,1,0,200,1,14,11,1,25,25,1,0.75
Frosted_Mini-Wheats,Kelloggs,C,100,3,0,0,3,14,7,2,100,25,1,0.8
Fruitful_Bran,Kelloggs,C,120,3,0,240,5,14,12,3,190,25,1.33,0.67
Fruity_Pebbles,Post,C,110,1,1,135,0,13,12,2,25,25,1,0.75
Golden_Crisp,Post,C,100,2,0,45,0,11,15,1,40,25,1,0.88
Golden_Grahams,General Mills,C,110,1,1,280,0,15,9,2,45,25,1,0.75
Grape_Nuts_Flakes,Post,C,100,3,1,140,3,15,5,3,85,25,1,0.88
Grape-Nuts,Post,C,110,3,0,170,3,17,3,3,90,25,1,0.25
Great_Grains_Pecan,Post,C,120,3,3,75,3,13,4,3,100,25,1,0.33
Honey_Graham_Ohs,Quaker Oats,C,120,1,2,220,1,12,11,2,45,25,1,1
Honey_Nut_Cheerios,General Mills,C,110,3,1,250,1.5,11.5,10,1,90,25,1,0.75
Honey-comb,Post,C,110,1,0,180,0,14,11,1,35,25,1,1.33
Just_Right_Crunchy__Nuggets,Kelloggs,C,110,2,1,170,1,17,6,3,60,100,1,-1
Just_Right_Fruit_&amp;_Nut,Kelloggs,C,140,3,1,170,2,20,9,3,95,100,1.3,0.75
Kix,General Mills,C,110,2,1,260,0,21,3,2,40,25,1,1.5
Life,Quaker Oats,C,100,4,2,150,2,12,6,2,95,25,1,0.67
Lucky_Charms,General Mills,C,110,2,1,180,0,12,12,2,55,25,1,1
Maypo,American Home Food Products,H,100,4,1,0,0,16,3,2,95,25,1,-1
Mueslix_Crispy_Blend,Kelloggs,C,160,3,2,150,3,17,13,3,160,25,1.5,0.67
Multi-Grain_Cheerios,General Mills,C,100,2,1,220,2,15,6,1,90,25,1,1
Nut&amp;Honey_Crunch,Kelloggs,C,120,2,1,190,0,15,9,2,40,25,1,0.67
Nutri-Grain_Almond-Raisin,Kelloggs,C,140,3,2,220,3,21,7,3,130,25,1.33,0.67
Nutri-grain_Wheat,Kelloggs,C,90,3,0,170,3,18,2,3,90,25,1,-1
Oatmeal_Raisin_Crisp,General Mills,C,130,3,2,170,1.5,13.5,10,3,120,25,1.25,0.5
Post_Nat._Raisin_Bran,Post,C,120,3,1,200,6,11,14,3,260,25,1.33,0.67
Product_19,Kelloggs,C,100,3,0,320,1,20,3,3,45,100,1,1
Puffed_Rice,Quaker Oats,C,50,1,0,0,0,13,0,3,15,0,0.5,1
Puffed_Wheat,Quaker Oats,C,50,2,0,0,1,10,0,3,50,0,0.5,-1
Quaker_Oat_Squares,Quaker Oats,C,100,4,1,135,2,14,6,3,110,25,1,0.5
Quaker_Oatmeal,Quaker Oats,H,100,5,2,0,2.7,-1,-1,1,110,0,1,0.67
Raisin_Bran,Kelloggs,C,120,3,1,210,5,14,12,2,240,25,1.33,0.75
Raisin_Nut_Bran,General Mills,C,100,3,2,140,2.5,10.5,8,3,140,25,1,0.5
Raisin_Squares,Kelloggs,C,90,2,0,0,2,15,6,3,110,25,1,0.5
Rice_Chex,Ralston Purina,C,110,1,0,240,0,23,2,1,30,25,1,1.13
Rice_Krispies,Kelloggs,C,110,2,0,290,0,22,3,1,35,25,1,1
Shredded_Wheat,Nabisco,C,80,2,0,0,3,16,0,1,95,0,0.83,-1
Shredded_Wheat_'n'Bran,Nabisco,C,90,3,0,0,4,19,0,1,140,0,1,0.67
Shredded_Wheat_spoon_size,Nabisco,C,90,3,0,0,3,20,0,1,120,0,1,0.67
Smacks,Kelloggs,C,110,2,1,70,1,9,15,2,40,25,1,0.75
Special_K,Kelloggs,C,110,6,0,230,1,16,3,1,55,25,1,1
Strawberry_Fruit_Wheats,Nabisco,C,90,2,0,15,3,15,5,2,90,25,1,-1
Total_Corn_Flakes,General Mills,C,110,2,1,200,0,21,3,3,35,100,1,1
Total_Raisin_Bran,General Mills,C,140,3,1,190,4,15,14,3,230,100,1.5,1
Total_Whole_Grain,General Mills,C,100,3,1,200,3,16,3,3,110,100,1,1
Triples,General Mills,C,110,2,1,250,0,21,3,3,60,25,1,0.75
Trix,General Mills,C,110,1,1,140,0,13,12,2,25,25,1,1
Wheat_Chex,Ralston Purina,C,100,3,1,230,3,17,3,1,115,25,1,0.67
Wheaties,General Mills,C,100,3,1,200,3,17,3,1,110,25,1,1
Wheaties_Honey_Gold,General Mills,C,110,2,1,200,1,16,8,1,60,25,1,0.75</code></pre></div></div>

<script src="./D3 Scatterplot Example_files/d3.v3.min.js"></script>
<script src="./D3 Scatterplot Example_files/highlight.min.js"></script>
<script>

var gist = {"history":[{"version":"01658739b86981f24257d0f3490b7f021044c4b5"}],"files":{"README.md":{"language":"Markdown","type":"text/plain","filename":"README.md","size":158,"sha":"911c6cc752435277c0376bc47d0259c47becfd76"},"cereal.csv":{"language":null,"type":"text/csv","filename":"cereal.csv","size":4738,"sha":"47f084ba06ede6d1f3ed119bea3f82072a701556"},"index.html":{"language":"HTML","type":"text/html","filename":"index.html","size":4427,"sha":"cf6d54bea692fe226da1add050bd76769180504b"},"thumbnail.png":{"language":null,"type":"image/png","filename":"thumbnail.png","size":14073,"sha":"13526c278e256419121728247ffe240e335e5081"}},"created_at":"2013-08-08T14:27:44.000Z","updated_at":"2014-09-24T18:26:09.000Z","description":"D3 Scatterplot Example","owner":{"login":"weiglemc"},"id":"6185069"};

var files = d3.values(gist.files)
    .sort(function(a, b) { return (b.filename === "index.html") - (a.filename === "index.html") || a.filename.localeCompare(b.filename); });

var readme = d3.selectAll(".gist-readme")
    .data(files.filter(function(d) { return /^readme\b/i.test(d.filename) && d.language === "Markdown"; }))
    .each(function(d) {
      var readme = d3.select(this);
      d3.text("/weiglemc/raw/6185069/01658739b86981f24257d0f3490b7f021044c4b5/" + d.filename, function(error, content) {
        readme.html(new Showdown.converter().makeHtml(content));
        readme.selectAll("code").each(function() { hljs.highlightBlock(this); });
      });
    });

var source = d3.select(".gist-sources").selectAll(".gist-source")
    .data(files.filter(function(d) { return !/^readme\b/i.test(d.filename) && d.size < 50000 && text(d.type); }))
  .enter().append("div")
    .attr("class", "gist-source");

source.append("h2")
    .text(function(d) { return d.filename; })
  .append("a")
    .attr("name", function(d) { return d.filename; })
    .attr("href", function(d) { return "#" + d.filename; })
    .text("#");

source.append("pre").append("code")
    .attr("class", function(d) { return d.language && (d.language === "JSON" ? "javascript" : d.language.toLowerCase()); })
    .each(function(d) {
      var code = d3.select(this);
      d3.text("/weiglemc/raw/6185069/01658739b86981f24257d0f3490b7f021044c4b5/" + (d.filename === "index.html" ? "" : d.filename), function(error, content) {
        code.text(content);
        hljs.highlightBlock(code.node());
      });
    });

function text(type) {
  return /(^text\/)|(^application\/(javascript|json)$)|(^image\/svg$)|(\+xml$)/.test(type);
}

</script>

<footer>
  <a href="http://bl.ocks.org/weiglemc">weiglemc</a>’s block
  <a class="gist" title="View gist #6185069 on GitHub" href="https://gist.github.com/weiglemc/6185069">#6185069</a>
  <span class="date">August 8, 2013</span>
</footer>

<script>

GoogleAnalyticsObject = "ga", ga = function() { ga.q.push(arguments); }, ga.q = [], ga.l = +new Date;
ga("create", "UA-48272912-1", "ocks.org");
ga("send", "pageview");

</script>
<script async="" src="./D3 Scatterplot Example_files/analytics.js"></script>
</body><object id="db9908da-1898-b9b0-3bda-888698889aa9" width="0" height="0" type="application/gas-events-bb"></object></html>